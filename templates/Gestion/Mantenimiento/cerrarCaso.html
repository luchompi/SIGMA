{% extends "base/body.html" %}
{% load crispy_forms_tags %}
{% block title %}
    Mantenimientos - SIGMA
{% endblock title %}

{% block header %}
    <h1>Modulo de mantenimientos - Cierre de caso con PID {{query.PID}}</h1>
{% endblock header %}


{% block content %}
    <div class="container-fluid">
    	<div class="row">
    		<div class="col">
    			<div class="card card-primary">
	  <div class="card-header">
	    <h3 class="card-title"> Datos del caso</h3>
	  </div>
	  <!-- /.card-header -->
	  <div class="card-body">
	    <table class="table table-striped table-hover table-bordered">
	        <thead>
	        	<th>Placa</th>
	            <th>Elemento</th>
	            <th>Usuario que solicitó mantenimiento</th>
	            <th>Fecha de apertura</th>
	        </thead>
	        <tbody>
	        	<tr>
	        		<td>{{query.elemento.placa}}</td>
	        		<td>{{query.elemento.modelo}}</td>
	        		<td>{{query.user}}</td>
	        		<td>{{query.timestamps}}</td>
	        	</tr>

	        </tbody>
	    </table>
	     <table class="table table-striped table-hover table-bordered">
	        <thead>
	        	<th>Descripción del caso</th>
	            
	        </thead>
	        <tbody>
	        	<tr>
	        		<td>{{query.descripcion}}</td>
	        	</tr>

	        </tbody>
	    </table>
	  </div>
	</div>
    		</div>
    		<div class="col">
    			<div class="card card-primary">
	  <div class="card-header">
	    <h3 class="card-title"> Datos de cierre</h3>
	  </div>
	  <!-- /.card-header -->
	  <div class="card-body">
	    <form method="POST">
	    {%	csrf_token	%}
	    <div class="container">
	    	{{form.observaciones|as_crispy_field}}
	    </div>
	    <div class="container">
	    	<p>Datos extras</p>
	    	{{form.irreparable|as_crispy_field}}
	    </div>
	    <button type="button" class="btn btn-success" data-toggle="modal" data-target="#modal-default">
						        Cerrar Caso
						    </button>
						    <div class="modal fade" id="modal-default">
							  <div class="modal-dialog">
							    <div class="modal-content">
							      <div class="modal-header">
							        <h4 class="modal-title">Cerrar caso de Mantenimiento</h4>
							        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
							          <span aria-hidden="true">&times;</span>
							        </button>
							      </div>
							      <div class="modal-body">
							        <h4>Está a punto de realizar esta operacion de Cierre de caso</h4>
							        <p>Tenga en cuenta que este proceso <strong>NO SE PUEDE DESHACER</strong></p>
							        <p>¿Continuar?</p>
							      <div class="modal-footer justify-content-between">
							        <button type="button" class="btn btn-default" data-dismiss="modal">No, Cancelar</button>
							        <button type="submit" class="btn btn-success">Sí, continuar</button>
							      </div>
							      </form>
							    </div>
							    <!-- /.modal-content -->
							  </div>
							  <!-- /.modal-dialog -->
							</div>
	    </form>
	  </div>
	</div>
    			
    		</div>
    	</div>
    </div>
{% endblock content %}